/*****************************************************************************/
/* File: startup.c                                                           */
/*                                                                           */
/* Description:  start up routines                                           */
/*                                                                           */
/*                                                                           */
/* Date: 2022/01/05                                                          */
/*                                                                           */
/*****************************************************************************/



/*****************************************************************************/
/* Include definitions                                                       */
/*****************************************************************************/
#include "avr/io.h"
#include "util/atomic.h"
#include "startup.h"
/*****************************************************************************/
/* typedefs definitions                                                      */
/*****************************************************************************/


/*****************************************************************************/
/* Macro definitions                                                         */
/*****************************************************************************/


/*****************************************************************************/
/* Constant definitions                                                      */
/*****************************************************************************/


/*****************************************************************************/
/* Prototype definitions                                                     */
/*****************************************************************************/


/*****************************************************************************/
/* Global Variables                                                          */
/*****************************************************************************/


/*****************************************************************************/
/* Public functions                                                          */
/*****************************************************************************/
void startup_init(void)
{
  // Disable interrupts
  cli();
  // Clock Prescaler change enable and clock division 1
  CLKPR = 0x80U;
  CLKPR = 0x00U;

  //The bootloader enable UART so disable to get a clean start
  UCSR0B = 0;

  // Enable interrupts
  sei();
}

/*****************************************************************************/
/* Static functions                                                          */
/*****************************************************************************/

